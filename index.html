<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>🎁 Shutterized Hongbao DApp</title>
  <script src="https://cdn.jsdelivr.net/npm/web3/dist/web3.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <h1 class="title">🎁 Shutterized Hongbao Gifting DApp</h1>

    <!-- Sender Section -->
    <div id="sender-section" class="section hidden">
      <h2>Create and gift a shutterized Hongbao</h2>
      <div class="hongbao-envelope">
        <label for="hongbao-amount">💰 Amount (XDAI):</label>
        <input type="number" id="hongbao-amount" class="input" step="0.01" placeholder="Enter amount">
        
        <label for="hongbao-password">🔒 Password (optional):</label>
        <input type="password" id="hongbao-password" class="input" placeholder="Enter a password to protect the Hongbao">
        
        <button id="create-hongbao" class="button">Create Hongbao with MetaMask</button>
        <button id="create-hongbao-with-passkey" class="button">Fund Hongbao with Passkey Wallet</button>
        
        <p>Note, the receiver doesn't need any funds, nor a wallet to claim</p>
        <p id="hongbao-details" class="details hidden"></p>
        <p id="hongbao-link" class="link hidden"></p>
        <div id="hongbao-visual" class="hongbao-visual hidden"></div>
      </div>
    </div>

    <!-- Receiver Section -->
    <div id="receiver-section" class="section hidden">
      <p class="details">
        Someone gifted you a Hongbao with some xDAI on Gnosis Chain! This Hongbao is locked until Lunar New Year! It was encrypted with Shutter, and Shutter Keypers will provide the decryption key exactly at the right time. 
        <br>
        <a href="https://www.shutter.network/" target="_blank" rel="noopener noreferrer" class="shutter-link">
          Find out more about Shutter's threshold encryption DKG.
        </a>
      </p>

      <div class="hongbao-envelope">
<label for="hongbao-key" class="secondary-label">🔑 Encrypted Key:</label>
<input type="text" id="hongbao-key" class="input secondary-input" placeholder="Paste encrypted key from link">

<label for="hongbao-timestamp" class="secondary-label">⏰ Timestamp:</label>
<input type="text" id="hongbao-timestamp" class="input secondary-input" placeholder="Paste timestamp from link">

        
        <div id="password-container" class="hidden">
          <label for="redeem-password">🔑 Password (if protected):</label>
          <input type="password" id="redeem-password" class="input" placeholder="Enter the password">
          <button id="decrypt-password" class="button">Decrypt with Password</button>
        </div>
        
        
        
        <h3>Countdown to Unlock:</h3>
        <p id="countdown" class="countdown"></p>
        

        <div id="redemption-options">
          <button id="redeem-new-wallet" class="button hidden">Claim to a New Wallet</button>
          <button id="toggle-other-options" class="button small hidden">Other Claiming Options</button>
          <div id="other-claim-options" class="hidden">
            <button id="redeem-existing-wallet" class="button">Claim to an Existing Wallet</button>
            <button id="redeem-hongbao" class="button">Redeem to MetaMask</button>
          </div>
        </div>
        
        
        <p id="redemption-details" class="details hidden"></p>
        <p id="redeem-result" class="details hidden"></p>
        <div id="hongbao-visual-redeem" class="hongbao-visual hidden"></div>
      </div>
      
      <div id="create-own-section">
        <button id="create-own-hongbao" class="button">Create Your Own Hongbao</button>
      </div>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/ethers/dist/ethers.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
  <script type="module" src="app.js"></script>
</body>
</html>
